"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7340],{3905:(e,r,n)=>{n.d(r,{Zo:()=>c,kt:()=>f});var t=n(67294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function i(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var g=t.createContext({}),u=function(e){var r=t.useContext(g),n=r;return e&&(n="function"==typeof e?e(r):s(s({},r),e)),n},c=function(e){var r=u(e.components);return t.createElement(g.Provider,{value:r},e.children)},p="mdxType",l={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},w=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,g=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=u(n),w=o,f=p["".concat(g,".").concat(w)]||p[w]||l[w]||a;return n?t.createElement(f,s(s({ref:r},c),{},{components:n})):t.createElement(f,s({ref:r},c))}));function f(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=w;var i={};for(var g in r)hasOwnProperty.call(r,g)&&(i[g]=r[g]);i.originalType=e,i[p]="string"==typeof e?e:o,s[1]=i;for(var u=2;u<a;u++)s[u]=n[u];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}w.displayName="MDXCreateElement"},46001:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>g,default:()=>f,frontMatter:()=>i,metadata:()=>u,toc:()=>p});var t=n(87462),o=n(63366),a=(n(67294),n(3905)),s=["components"],i={},g="springfox \u6e90\u7801\u5206\u6790(\u5341\u516d) \u5206\u7ec4\u63a5\u53e3swagger-resouces",u={unversionedId:"action/springfox/springfox16",id:"action/springfox/springfox16",title:"springfox \u6e90\u7801\u5206\u6790(\u5341\u516d) \u5206\u7ec4\u63a5\u53e3swagger-resouces",description:"\u901a\u8fc7\u524d\u9762\u7684\u5206\u6790,\u6211\u4eec\u6700\u7ec8\u5f97\u5230\u4e86springfox\u7684Documentation\u6587\u6863\u5bf9\u8c61,\u5c06\u6211\u4eec\u7684RESTful\u63a5\u53e3\u6700\u7ec8\u8f6c\u6362\u4e3a\u4e86\u6587\u6863\u5bf9\u8c61,\u6587\u6863\u5bf9\u8c61\u662f\u5305\u542b\u4e86\u63a5\u53e3\u5217\u8868\u3001\u5206\u7ec4\u4fe1\u606f\u7b49\u5c5e\u6027\u7684",source:"@site/docs/action/springfox/springfox16.md",sourceDirName:"action/springfox",slug:"/action/springfox/springfox16",permalink:"/docs/action/springfox/springfox16",draft:!1,tags:[],version:"current",lastUpdatedBy:"xiaoyumin",lastUpdatedAt:1660577531,formattedLastUpdatedAt:"2022\u5e748\u670815\u65e5",frontMatter:{},sidebar:"action",previous:{title:"springfox \u6e90\u7801\u5206\u6790(\u5341\u4e94) \u5f52\u6863\u5f97\u5230Documentation\u6587\u6863\u5bf9\u8c61",permalink:"/docs/action/springfox/springfox15"},next:{title:"springfox \u6e90\u7801\u5206\u6790(\u5341\u4e03) Swagger2\u63a5\u53e3\u6587\u6863\u793a\u4f8b\u63a5\u53e3api-docs",permalink:"/docs/action/springfox/springfox17"}},c={},p=[],l={toc:p},w="wrapper";function f(e){var r=e.components,n=(0,o.Z)(e,s);return(0,a.kt)(w,(0,t.Z)({},l,n,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"springfox-\u6e90\u7801\u5206\u6790\u5341\u516d-\u5206\u7ec4\u63a5\u53e3swagger-resouces"},"springfox \u6e90\u7801\u5206\u6790(\u5341\u516d) \u5206\u7ec4\u63a5\u53e3swagger-resouces"),(0,a.kt)("p",null,"\u901a\u8fc7\u524d\u9762\u7684\u5206\u6790,\u6211\u4eec\u6700\u7ec8\u5f97\u5230\u4e86springfox\u7684Documentation\u6587\u6863\u5bf9\u8c61,\u5c06\u6211\u4eec\u7684RESTful\u63a5\u53e3\u6700\u7ec8\u8f6c\u6362\u4e3a\u4e86\u6587\u6863\u5bf9\u8c61,\u6587\u6863\u5bf9\u8c61\u662f\u5305\u542b\u4e86\u63a5\u53e3\u5217\u8868\u3001\u5206\u7ec4\u4fe1\u606f\u7b49\u5c5e\u6027\u7684"),(0,a.kt)("p",null,"\u5728springfox\u4e2d,\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86springfox-swagger-ui\u6765\u5448\u73b0\u6700\u7ec8\u7684\u63a5\u53e3\u4fe1\u606f.\u5728ui\u754c\u9762\u4e2d\u6709\u4e24\u4e2a\u6838\u5fc3\u63a5\u53e3\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"swagger-resources:swagger\u5206\u7ec4\u63a5\u53e3\uff0c\u521b\u5efa\u591a\u5c11Docket,\u5c31\u4f1a\u6709\u591a\u5c11\u5206\u7ec4\u4fe1\u606f"),(0,a.kt)("li",{parentName:"ul"},"/v2/api-docs:Swagger\u63a5\u53e3\u793a\u4f8b\u4fe1\u606f,\u901a\u8fc7Documentation\u5bf9\u8c61\u6700\u7ec8\u8f93\u51fa\u4e3aSwagger\u6807\u51c6\u4fe1\u606f")),(0,a.kt)("p",null,"\u5148\u6765\u770b\u63a5\u53e3\u6e90\u7801\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'\n@Controller\n@ApiIgnore\n@RequestMapping("/swagger-resources")\npublic class ApiResourceController {\n\n\n  @Autowired(required = false)\n  private SecurityConfiguration securityConfiguration;\n  @Autowired(required = false)\n  private UiConfiguration uiConfiguration;\n\n  private final SwaggerResourcesProvider swaggerResources;\n\n  @Autowired\n  public ApiResourceController(SwaggerResourcesProvider swaggerResources) {\n    this.swaggerResources = swaggerResources;\n  }\n\n  @RequestMapping(value = "/configuration/security")\n  @ResponseBody\n  public ResponseEntity<SecurityConfiguration> securityConfiguration() {\n    return new ResponseEntity<SecurityConfiguration>(\n        Optional.fromNullable(securityConfiguration).or(SecurityConfigurationBuilder.builder().build()), HttpStatus.OK);\n  }\n\n  @RequestMapping(value = "/configuration/ui")\n  @ResponseBody\n  public ResponseEntity<UiConfiguration> uiConfiguration() {\n    return new ResponseEntity<UiConfiguration>(\n        Optional.fromNullable(uiConfiguration).or(UiConfigurationBuilder.builder().build()), HttpStatus.OK);\n  }\n\n  @RequestMapping\n  @ResponseBody\n  public ResponseEntity<List<SwaggerResource>> swaggerResources() {\n    return new ResponseEntity<List<SwaggerResource>>(swaggerResources.get(), HttpStatus.OK);\n  }\n}\n\n')),(0,a.kt)("p",null,"\u901a\u8fc7swaggerResources.get()\u65b9\u6cd5\u83b7\u53d6\u6700\u7ec8\u7684\u4fe1\u606f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"SwaggerResourcesProvider"),"\u662f\u63a5\u53e3,\u5728springfox\u4e2d\u53ea\u6709\u4e00\u4e2a\u5b9e\u73b0\u7c7b",(0,a.kt)("inlineCode",{parentName:"p"},"InMemorySwaggerResourcesProvider")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'\n@Component\npublic class InMemorySwaggerResourcesProvider implements SwaggerResourcesProvider {\n  private final String swagger1Url;\n  private final String swagger2Url;\n\n  @VisibleForTesting\n  boolean swagger1Available;\n  @VisibleForTesting\n  boolean swagger2Available;\n\n  private final DocumentationCache documentationCache;\n\n  @Autowired\n  public InMemorySwaggerResourcesProvider(\n      Environment environment,\n      DocumentationCache documentationCache) {\n    swagger1Url = environment.getProperty("springfox.documentation.swagger.v1.path", "/api-docs");\n    swagger2Url = environment.getProperty("springfox.documentation.swagger.v2.path", "/v2/api-docs");\n    swagger1Available = classByName("springfox.documentation.swagger1.web.Swagger1Controller").isPresent();\n    swagger2Available = classByName("springfox.documentation.swagger2.web.Swagger2Controller").isPresent();\n    this.documentationCache = documentationCache;\n  }\n\n  @Override\n  public List<SwaggerResource> get() {\n    List<SwaggerResource> resources = new ArrayList<SwaggerResource>();\n\n    for (Map.Entry<String, Documentation> entry : documentationCache.all().entrySet()) {\n      String swaggerGroup = entry.getKey();\n      if (swagger1Available) {\n        SwaggerResource swaggerResource = resource(swaggerGroup, swagger1Url);\n        swaggerResource.setSwaggerVersion("1.2");\n        resources.add(swaggerResource);\n      }\n\n      if (swagger2Available) {\n        SwaggerResource swaggerResource = resource(swaggerGroup, swagger2Url);\n        swaggerResource.setSwaggerVersion("2.0");\n        resources.add(swaggerResource);\n      }\n    }\n    Collections.sort(resources);\n    return resources;\n  }\n\n  private SwaggerResource resource(String swaggerGroup, String baseUrl) {\n    SwaggerResource swaggerResource = new SwaggerResource();\n    swaggerResource.setName(swaggerGroup);\n    swaggerResource.setUrl(swaggerLocation(baseUrl, swaggerGroup));\n    return swaggerResource;\n  }\n\n  private String swaggerLocation(String swaggerUrl, String swaggerGroup) {\n    String base = Optional.of(swaggerUrl).get();\n    if (Docket.DEFAULT_GROUP_NAME.equals(swaggerGroup)) {\n      return base;\n    }\n    return base + "?group=" + swaggerGroup;\n  }\n}\n\n')),(0,a.kt)("p",null,"\u901a\u8fc7\u904d\u5386",(0,a.kt)("inlineCode",{parentName:"p"},"DocumentationCache"),"\u4e2d\u7f13\u5b58\u7684Documentation\u5bf9\u8c61,\u5f97\u5230\u63a5\u53e3\u6587\u6863\u4fe1\u606f\u7684\u5206\u7ec4\u4fe1\u606f,\u54cd\u5e94",(0,a.kt)("inlineCode",{parentName:"p"},"SwaggerResource"),"\u7684\u96c6\u5408\u4fe1\u606f"),(0,a.kt)("p",null,"SwaggerResource\u4fe1\u606f\u4e3b\u8981\u5305\u542b\u7684\u5b57\u6bb5\u4fe1\u606f\uff1a\u540d\u79f0\uff0curl\u3001swagger\u7248\u672c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class SwaggerResource implements Comparable<SwaggerResource> {\n  private String name;\n  private String url;\n  private String swaggerVersion;\n  @Override\n  public int compareTo(SwaggerResource other) {\n    return ComparisonChain.start()\n        .compare(this.swaggerVersion, other.swaggerVersion)\n        .compare(this.name, other.name)\n        .result();\n  }\n\n}\n")),(0,a.kt)("p",null,"\u5728\u5f00\u53d1",(0,a.kt)("inlineCode",{parentName:"p"},"swagger-bootstrap-ui"),"\u7684\u8fc7\u7a0b\u4e2d,\u7ecf\u5e38\u4f1a\u78b0\u5230\u5f88\u591a\u670b\u53cb\u63d0\u95ee,\u6709\u4ec0\u4e48\u65b9\u5f0f\u80fd\u5bf9\u6587\u6863\u7684\u5206\u7ec4\u4fe1\u606f\u8fdb\u884c\u6392\u5e8f\u7684\u5417\uff1f"),(0,a.kt)("p",null,"\u6211\u4eec\u901a\u8fc7\u4e0a\u9762\u7684\u6e90\u7801\u53ef\u4ee5\u770b\u5230,\u5176\u5b9eSwaggerResource\u5b9e\u73b0\u4e86Comparable\u63a5\u53e3,\u4f46\u662f\u4ed6\u7684\u6392\u5e8f\u89c4\u5219\u662f\u5148\u6839\u636eswagger\u7684\u7248\u672c\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u5bf9\u540d\u79f0\u8fdb\u884c\u6392\u5e8f,asc\u987a\u5e8f\u6392\u5e8f"),(0,a.kt)("p",null,"\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u5b9e\u73b0\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u6392\u5e8f\u65b9\u5f0f\u5462?\u540e\u9762\u6211\u4f1a\u8be6\u7ec6\u4ecb\u7ecd."))}f.isMDXComponent=!0}}]);